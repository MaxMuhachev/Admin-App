{{template "base" .}}
{{template "header" .}}

<div class="container">
    <h1 class="p-3">Редактирование связи фильмов с жанрами</h1>

    <div class="container-fluid">
        <a href="movie-genres/create"><button type="submit" class="btn btn-success mt-5">Добавить связь фильма с жанрами</button></a>
    </div>
    <table class="table table-striped table-bordered table-hover tableID">
        <thead>
        <tr>
            <th class="center align-middle">Действия</th>
            <th class="center align-middle">Название фильма</th>
            <th class="center align-middle">Название жанра</th>
        </tr>
        </thead>
        <tbody>
        {{if not .MovieHasGenreList}}
            <tr>
                <td colspan="3">Связей фильмов с жанрами нет</td>
            </tr>
        {{end}}

        {{range $key, $value := .MovieHasGenreList}}
            <tr>
                <td style="width: 10%">
                    <a href="/movie-genres/edit?movieId={{ $key.MovieID }}">
                        <button  class="btn btn-warning pb-1 pl-1 pr-2 pt-1 mb-2">
                            Именить
                        </button>
                    </a>
                </td>
                <td style="width: 10%">{{ $key.MovieTitle }}</td>
                <td>
                    {{range $value}}
                        <div>{{ .GenreTitle }}</div>
                    {{end}}
                </td>
            </tr>
        {{end}}
        </tbody>
    </table>
</div>
{{template "script" .}}

<script type="text/javascript">
    window.onload = function() {
        $('.genre-head').addClass("active");
    };
</script>
